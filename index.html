<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FRC 6998 QR Scanner</title>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Lexend', sans-serif;
  background: linear-gradient(135deg,#2B1F12,#5A3E25);
  color: #FFF;
  text-align: center;
  padding: 20px;
}

h1 { margin-bottom: 12px; }
#reader { width: 300px; margin: 0 auto; }
#result { background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; margin-top: 20px; word-wrap: break-word; }
</style>
</head>
<body>

<h1>FRC 6998 â€“ QR Scanner</h1>
<p>Point your camera at the generated QR code</p>

<div id="reader"></div>
<div id="result">Scanned data will appear here</div>

<!-- html5-qrcode library -->
<script src="https://unpkg.com/html5-qrcode@2.3.9/html5-qrcode.min.js"></script>
<script>
const resultContainer = document.getElementById("result");

function onScanSuccess(decodedText, decodedResult) {
    // Display the scanned JSON in a readable way
    try {
        const obj = JSON.parse(decodedText);
        resultContainer.innerHTML = `<pre>${JSON.stringify(obj, null, 2)}</pre>`;
    } catch(e) {
        resultContainer.textContent = "Scanned QR but data is not valid JSON: " + decodedText;
    }
}

// Create the scanner
let html5QrcodeScanner = new Html5Qrcode("reader");

// Request camera permission and start scanning
Html5Qrcode.getCameras().then(cameras => {
    if(cameras && cameras.length) {
        const cameraId = cameras[0].id; // Use first camera
        html5QrcodeScanner.start(
            cameraId,
            {
                fps: 10,
                qrbox: { width: 250, height: 250 }
            },
            onScanSuccess
        ).catch(err => {
            resultContainer.textContent = "Camera start error: " + err;
        });
    } else {
        resultContainer.textContent = "No camera found on this device.";
    }
}).catch(err => {
    resultContainer.textContent = "Camera permission denied or error: " + err;
});
</script>

</body>
</html>
